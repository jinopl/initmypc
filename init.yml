- name: Setup my pc
  hosts: all
  become: yes

  tasks:
    
    - name: fail when system is not debian based
      fail:
        msg: "Sorry system is not debian based"
      when: ansible_facts['os_family'] != "Debian"

    - name: installing python-apt for package management
      apt:
        name: python-apt
        state: present

    - name: Updating repo's
      apt:
        update_cache: yes
        cache_valid_time: 3600

    - name: Update all packages to their latest version
      apt:
        name: "*"
        state: latest

    - name: install essential packages
      apt:
        name:
          - ssh
          - vim
          - htop
          - neofetch
          - gdebi
          - flameshot
          - git
          - cowsay
        state: present
